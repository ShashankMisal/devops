<section class="card">
  <div class="header">
    <div>
      <h2>Tasks</h2>
      <p class="muted">Track your DevOps learning work.</p>
    </div>
    <div class="actions">
      <button class="button" (click)="loadTasks()">Refresh</button>
      <a class="button primary" routerLink="/add">Add Task</a>
    </div>
  </div>

  <div *ngIf="createdMessage" class="success">Task created successfully.</div>

  <div *ngIf="loading" class="muted">Loading tasks...</div>

  <div *ngIf="errorMessage" class="alert">
    {{ errorMessage }}
    <button class="button" (click)="loadTasks()">Retry</button>
  </div>

  <div *ngIf="!loading && !errorMessage">
    <div *ngIf="tasks.length === 0" class="muted">No tasks yet.</div>
    <ul class="task-list" *ngIf="tasks.length > 0">
      <li *ngFor="let task of tasks">
        <label class="task-item">
          <input type="checkbox" [checked]="task.done" (change)="toggleDone(task)">
          <span [class.done]="task.done">{{ task.title }}</span>
        </label>
        <span class="badge">{{ task.createdAt | date: 'short' }}</span>
      </li>
    </ul>
  </div>
</section>
